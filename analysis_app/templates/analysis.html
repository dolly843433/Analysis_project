{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Analysis Results</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h1>Analysis Results</h1>

    <h2>Demographic Distribution (Based on citizenship)</h2>
    <canvas id="citizenshipChart" width="400" height="200"></canvas>

    <h2>Demographic Distribution (Based on birthplace)</h2>
    <canvas id="birthplaceChart" width="400" height="200"></canvas>


    <script>
        const citizenshipData = {{ citizenship_data|safe }};
        const citizenshipLabels = citizenshipData.map(item => item.value);
        const citizenshipCounts = citizenshipData.map(item => item.count);

        const citizenshipChart = new Chart(document.getElementById('citizenshipChart'), {
            type: 'bar',
            data: {
                labels: citizenshipLabels,
                datasets: [{
                    label: 'Count',
                    data: citizenshipCounts,
                    backgroundColor: 'rgba(50, 100, 150, 0.5)',
                    borderColor: 'rgba(75, 192, 192, 1)',

                }]
            }
        });

        const birthplaceData = {{ birthplace_data|safe }};
        const birthplaceLabels = birthplaceData.map(item => item.value);
        const birthplaceCounts = birthplaceData.map(item => item.count);

        const birthplaceChart = new Chart(document.getElementById('birthplaceChart'), {
            type: 'bar',
            data: {
                labels: birthplaceLabels,
                datasets: [{
                    label: 'Count',
                    data: birthplaceCounts,
                    backgroundColor: 'rgba(25, 150, 100, 0.5)',
                    borderColor: 'rgba(75, 192, 192, 1)',

                }]
            }
        });
          </script>
</body>
</html>